---
#- name: Add nodejs apt key
#  apt_key:
#    url: https://deb.nodesource.com/gpgkey/nodesource.gpg.key
#    state: present

#- name: Add nodejs 14.x ppa for apt repo
#  apt_repository:
#    repo: 'deb https://deb.nodesource.com/node_14.x focal main'
#    update_cache: yes

- name: Install nodejs
  apt: 
    pkg: nodejs
    state: present

#- name: Import MongoDB public key
#  apt_key: 
#    url: https://www.mongodb.org/static/pgp/server-4.4.asc
#    state: present

#- name: Add MongoDB Repository
#  apt_repository: 
#    repo: 'deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/4.4 multiverse'
#    state: present

- name: Install MongoDB
  apt: 
    pkg: mongodb
    state: latest
    update_cache: yes
  notify: 
  - start mongodb

- name: Define Environment variables
  shell: export APP_PORT=3002
  shell: export MONGO_PORT=27017
  shell: export MONGO_USER="team28"
  shell: export MONGO_PASSWORD="csc519"
  shell: export MONGO_IP="localhost"
